function topperFillHelp(){$(".big-cta").each(function(){var e=$(this).find(".content-wrap").outerHeight()+$(".site-header").outerHeight()+200;$(this).find(".go-down-wrap")&&(e+=$(this).find(".go-down-wrap").outerHeight()),$(this).find(".extra-cta-buttons")&&(e+=$(this).find(".extra-cta-buttons").outerHeight());var t=.85,o=$(window).height()*t;o-=$(".topper").offset().top,isMobile()&&(o=startWindowHeight*t),o-=$(".site-wrap").css("margin-top").slice(0,-2),$(this).css("height",o),$(this).css("min-height",e)})}function supportPlaceholders(){$("[placeholder]").focus(function(){var e=$(this);e.val()==e.attr("placeholder")&&(e.val(""),e.removeClass("placeholder"))}).blur(function(){var e=$(this);""!==e.val()&&e.val()!==e.attr("placeholder")||(e.addClass("placeholder"),e.val(e.attr("placeholder")))}).blur(),$("[placeholder]").parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var e=$(this);e.val()==e.attr("placeholder")&&e.val("")})})}function isYouTube(e){var t=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!e.match(t)}function getVimeoId(e){var t=/vimeo.*\/(\d+)/i.exec(e);return!!t}function isImage(e){return null!==e.match(/\.(jpeg|jpg|gif|png)$/)}function is_touch_device(){return"ontouchstart"in window||navigator.maxTouchPoints}function isIE(e){return e=e||navigator.userAgent,e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1||e.indexOf("Edge/")>-1}function isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function stickyNav(){var e=0;e=$("body").offset().top-$(window).scrollTop();var t=0;e<t?($("body").addClass("sticky"),$("body").removeClass("not-sticky")):($("body").removeClass("sticky"),$("body").addClass("not-sticky"))}function isJson(e){try{JSON.parse(e)}catch(t){return!1}return!0}function timeConverter(e){var t=new Date(1e3*e),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=(t.getFullYear(),o[t.getMonth()]),a=t.getDate(),n=(t.getHours(),t.getMinutes(),t.getSeconds(),i+" "+a);return n}var map="",markers="",startWindowHeight=$(window).height();$(function(){function e(e){if(!e||0==e.length)return $(".have-no-events").addClass("show-me"),!1;for(var t=e[0],o=0;o<e.length;o++)if(e[o]&&e[o].location&&e[o].location.location&&e[o].location.location.longitude&&void 0!==e[o].location.location.longitude){t=e[o];break}mapboxgl.accessToken=$("#mobilize-map").data("api-key"),map=new mapboxgl.Map({container:"mobilize-map",style:"mapbox://styles/scotchio/cjvxhrl2i63641cmh755t1uv2",center:[t.location.location.longitude,t.location.location.latitude],zoom:7}),map.addControl(new mapboxgl.NavigationControl)}function t(e,t){var n={};n.type="FeatureCollection",n.features=[],e.forEach(function(e,t){if(e&&e.location&&e.location.location&&e.location.location.longitude&&void 0!==e.location.location.longitude){var o={type:"Feature",geometry:{type:"Point",coordinates:[e.location.location.longitude,e.location.location.latitude]},properties:e};n.features.push(o)}}),t?map.on("load",function(e){map.addSource("places",{type:"geojson",data:n}),a(n)}):(map.removeSource("places"),map.addSource("places",{type:"geojson",data:n}),a(n)),n.features.forEach(function(e,t){var a=document.createElement("div");a.id="marker-"+t,a.className="marker "+e.properties.event_type;var n=new mapboxgl.Marker(a,{offset:[0,-23]}).setLngLat(e.geometry.coordinates).addTo(map);$(".mobilize-events .mobilize-list form").submit(function(){n.remove();var e=document.getElementsByClassName("mapboxgl-popup");return e[0]&&e[0].remove(),!1}),a.addEventListener("click",function(a){a.stopPropagation(),o(e,13),i(e),$(".mobilize-events #listings .item").removeClass("active");var n=document.getElementById("listing-"+t);n.classList.add("active")})})}function o(e,t){map.flyTo({center:e.geometry.coordinates,zoom:t})}function i(e){var t=document.getElementsByClassName("mapboxgl-popup");t[0]&&t[0].remove();var o=[];e.properties.featured_image_url&&o.push('<img style="max-width: 100%;" src="'+e.properties.featured_image_url+'">'),o.push('<p class="title">'+e.properties.title+"</p>");var i="",a="";if(e.properties.timeslots&&e.properties.timeslots.length>0&&(i=e.properties.timeslots[0].start_date,i=timeConverter(i),e.properties.timeslots.length>1)){var n=e.properties.timeslots.reverse();a=n[0].end_date,a=" - "+timeConverter(a)}var s='<a target="_blank" href="'+e.properties.browser_url+'">'+$(".mobilize-list").data("word-rsvp")+' <i class="far fa-angle-right"></i></a>';e.properties.location.address_lines&&o.push('<hr><p class="where"><strong class="less">'+i+a+"</strong>"+e.properties.location.address_lines.join()+"<br>"+e.properties.location.locality+", "+e.properties.location.region+" "+e.properties.location.postal_code+"<strong>"+s+"</strong></p>"),o=o.join("\n");new mapboxgl.Popup({closeOnClick:!1}).setLngLat(e.geometry.coordinates).setHTML(o).addTo(map)}function a(e){for(var t=0;t<e.features.length;t++){var a=e.features[t],n=a.properties,s=document.getElementById("listings"),r=s.appendChild(document.createElement("div"));r.className="item "+n.event_type,r.id="listing-"+t;var l=r.appendChild(document.createElement("div"));if(l.className="header-group",n.event_type){var c=n.event_type.toLowerCase().replace("_"," "),d=l.appendChild(document.createElement("div"));d.className="event-type "+n.event_type,d.innerHTML='<span class="text">'+c+"</span>"}if(n.timeslots&&n.timeslots.length>0){var p="",m="";if(p=n.timeslots[0].start_date,p=timeConverter(p),n.timeslots.length>1){var u=n.timeslots.reverse();m=u[0].end_date,m=" - "+timeConverter(m)}var h=l.appendChild(document.createElement("h4"));h.className="subheader",h.innerHTML=p+m}var f=l.appendChild(document.createElement("h3"));f.className="header";var v=f.appendChild(document.createElement("a"));if(v.href="#",v.className="title",v.dataPosition=t,v.innerHTML=n.title,n.description){var g=l.appendChild(document.createElement("div"));g.className="summary",g.innerHTML=n.description}var b=l.appendChild(document.createElement("div"));if(b.className="links",n.browser_url){var w=b.appendChild(document.createElement("a"));w.href=n.browser_url,w.target="_blank",w.className="browser_url",w.innerHTML=$(".mobilize-list").data("word-rsvp")+' <i class="far fa-angle-right"></i>'}v.addEventListener("click",function(t){t.preventDefault();var a=e.features[this.dataPosition];o(a,13),i(a),$(".mobilize-events #listings .item").removeClass("active"),$(this).closest(".item").addClass("active")})}}void 0===document.createElement("input").placeholder&&supportPlaceholders(),browserSupport.transition()&&browserSupport.translate3d()||$("html").addClass("legacy");var n=document.documentElement.style;"flexWrap"in n||"WebkitFlexWrap"in n||"msFlexWrap"in n?$("html").addClass("supports-flexbox"):$("html").addClass("no-flexbox");var s=!!document.createElement("video").canPlayType("video/mp4; codecs=avc1.42E01E,mp4a.40.2");if(s||$("body, .treated-image").addClass("no-video-support"),is_touch_device()&&$("body").addClass("is-touch"),$('a[href^="/donate"]').attr("target","_blank"),$(".go-down").click(function(){var e=$(this).closest("section").next();return $("html, body").stop().animate({scrollTop:e.offset().top-$(".site-header").height()},750,"easeOutExpo"),!1}),$("body").addClass("dom-ready"),$(".place-social").length>0){var r=6e5,l=new Date,c=new Date(Math.round(l.getTime()/r)*r);$.ajax({url:"/_latest-social",type:"GET",data:{when:c},success:function(e){return $(".place-social").html(e),$(".simple-slider").each(function(){$(this).slick({adaptiveHeight:!1,prevArrow:'<i class="fas fa-angle-left"></i>',nextArrow:'<i class="fas fa-angle-right"></i>',arrows:!0,slide:".slide",fade:!1,slidesToShow:1})}),!1}})}if($(".mobilize-events").length>0){$(".mobilize-events .mobilize-list form select").change(function(){$(this).addClass("active")});var r=6e5,l=new Date,c=new Date(Math.round(l.getTime()/r)*r),d={};d.rounded=c,d.include_promoted=1,$(".mobilize-events .mobilize-list form").submit(function(){var e=6e5,i=new Date,a=new Date(Math.round(i.getTime()/e)*e),n={};return n.rounded=a,n.include_promoted=1,$(".mobilize-events .mobilize-list form .zip").val()&&(n.zip=$(".mobilize-events .mobilize-list form .zip").val()),$(".mobilize-events .mobilize-list form .start").val()&&(n.start=$(".mobilize-events .mobilize-list form .start").val()),$(".mobilize-events .mobilize-list form .event-type-select").val()&&(n.event_types=$(".mobilize-events .mobilize-list form .event-type-select").val()),$(".mobilize-events #listings .item").remove(),$.ajax({dataType:"json",url:"/_get-mobilize-events",data:n,success:function(e){var i=e.result;if($(".have-no-events").removeClass("show-me"),!i||0==i.length)return setTimeout(function(){$(".have-no-events").addClass("show-me")},600),!1;for(var a=i[0],n=0;n<i.length;n++)if(i[n]&&i[n].location&&i[n].location.location&&i[n].location.location.longitude&&void 0!==i[n].location.location.longitude){a=i[n];break}var s={};s.geometry={},s.geometry.coordinates=[a.location.location.longitude,a.location.location.latitude],o(s,7),t(i,0)}}),!1}),$.ajax({dataType:"json",url:"/_get-mobilize-events",data:d,success:function(o){var i=o.result;e(i),t(i,1)}})}$(".simple-slider").length>0&&$(".simple-slider").each(function(){$(this).slick({adaptiveHeight:!1,prevArrow:'<i class="fas fa-angle-left"></i>',nextArrow:'<i class="fas fa-angle-right"></i>',arrows:!0,slide:".slide",fade:!1,slidesToShow:1})}),$(".fit-me").each(function(){$(this).fitText($(this).data("number"))}),$(".fit-me-wrap .fit-me").length>1&&$(".fit-me-wrap").each(function(){var e=$(this);setInterval(function(){var t=e.find(".show-me");e.find(".fit-me").removeClass("prev");var o=t.next();0===o.length&&(o=e.find(".fit-me").first());var i=t.prev();0===i.length&&(i=e.find(".fit-me").last()),t.removeClass("show-me").addClass("prev"),o.hide().addClass("show-me").show()},2500)}),$(".toggle-nav").click(function(){return $("body").toggleClass("show-nav"),!1}),$('.toggle-pre-splash, a[href*="#show-video-splash"]').click(function(){return $("body").toggleClass("show-pre-splash"),!1}),stickyNav(),$(".big-cta").length>0&&topperFillHelp(),$(".subnav select").change(function(){window.location.href=$(this).val()}),$(".site-alert").length>0&&setTimeout(function(){"seen"!==docCookies.getItem($(".site-alert .close-alert").data("cookie"))&&$(".site-alert").addClass("show")},1500),$(".site-alert a").click(function(){var e=$(this).data("length"),t=$(this).data("cookie");if(docCookies.setItem(t,"seen",e,"/"),$(this).hasClass("close-alert"))return $(".site-alert").remove(),!1}),$(".touch-hack").length>0&&$(".touch-hack").on("touchstart",function(){}),$("body").magnificPopup({delegate:".make-popup",type:"iframe",removalDelay:160,preloader:!1,fixedContentPos:!0,callbacks:{elementParse:function(e){(isYouTube(e.src)||getVimeoId(e.src))&&(e.type="iframe"),isImage(e.src)&&(e.type="image")},open:function(){$("body").addClass("splash-showing")},close:function(){$("body").removeClass("splash-showing")}},gallery:{enabled:!0}}),$(".input-wrap input").focus(function(){$(this).closest("form").addClass("clicked"),$(this).closest(".input-wrap").addClass("active")}),$(".input-wrap input").blur(function(){""===$(this).val()&&$(this).closest(".input-wrap").removeClass("active")}),$('p a[href^="#"], li a[href^="#"]')&&$('p a[href^="#"], li a[href^="#"]').click(function(){var e=$(this).attr("href");return $("html, body").delay(5e3).stop().animate({scrollTop:$(e).offset().top-$(".site-header").height()},750,"easeOutExpo"),!1}),$(".cool-select .selected-amount").click(function(){return $(this).closest(".cool-select").toggleClass("is-active"),$(this).closest(".text-donate").find("button").removeClass("heartBeat"),!1}),$(".cool-select div a").click(function(){var e=$(this).closest(".cool-select");if("#"==$(this).attr("href")){var t=$(this).text(),o=t.substr(1);return e.toggleClass("is-active"),e.closest("form").find(".hidden-amount").val(o),e.find(".selected-amount").text(t),e.find(".secret").text(t),e.closest(".text-donate").find("button").addClass("heartBeat"),!1}}),$(".click-off-trick").click(function(){return $(this).closest(".cool-select").toggleClass("is-active"),!1})}),$(window).load(function(){$("body").addClass("is-loaded"),$(".big-cta").length>0&&topperFillHelp(),stickyNav(),$(window.location.hash).length>0&&$("html, body").delay(5e3).stop().animate({scrollTop:$(window.location.hash).offset().top-$(".site-header").height()},750,"easeOutExpo")}),$(window).resize(function(){$(".big-cta").length>0&&topperFillHelp(),stickyNav(),$(window).width()>768&&!is_touch_device()&&$("body").removeClass("show-nav")}),$(window).scroll(function(){$(".big-cta").length>0&&topperFillHelp(),stickyNav()});var browserSupport={transition:function(){if(!window.getComputedStyle)return!1;var e=document.body||document.documentElement,t=e.style,o="transition";if("string"==typeof t[o])return!0;var i=["Moz","webkit","Webkit","Khtml","O","ms"];o=o.charAt(0).toUpperCase()+o.substr(1);for(var a=0;a<i.length;a++)if("string"==typeof t[i[a]+o])return!0;return!1},translate3d:function(){if(!window.getComputedStyle)return!1;var e,t;return e=document.createElement("p"),e.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",e.style.margin="0",document.body.insertBefore(e,document.body.lastChild),t=window.getComputedStyle(e).getPropertyValue("transform"),void 0!==t&&"none"!==t},IE:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),o=e.indexOf("Trident/");return!!(t>-1||o>-1||$("html").hasClass("ie"))}},docCookies={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,t,o,i,a,n){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(o)switch(o.constructor){case Number:s=o===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+o;break;case String:s="; expires="+o;break;case Date:s="; expires="+o.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(a?"; domain="+a:"")+(i?"; path="+i:"")+(n?"; secure":""),!0},removeItem:function(e,t,o){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,o=0;o<t;o++)e[o]=decodeURIComponent(e[o]);return e}};