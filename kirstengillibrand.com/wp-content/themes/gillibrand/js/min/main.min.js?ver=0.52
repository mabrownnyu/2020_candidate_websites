!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof module&&"object"==typeof module.exports?require("jquery"):jQuery)}(function(e){"es-MX"===$("html").attr("lang")&&(e.timeago.settings.strings={prefixAgo:"hace",prefixFromNow:"dentro de",suffixAgo:"",suffixFromNow:"",seconds:"menos de un minuto",minute:"un minuto",minutes:"unos %d minutos",hour:"una hora",hours:"%d horas",day:"un día",days:"%d días",month:"un mes",months:"%d meses",year:"un año",years:"%d años"})}),function($){var e=$("html"),o=$("body"),a=$(window),n=$("html, body"),t=0,i=0,s=!1,r=1,d=function(){var e=a.width(),o=e>=1024?"desktop":e>=768?"tablet":"mobile";return o},l=d(),c=function(){t=a.scrollTop(),m(),window.requestAnimationFrame(c)},f=function(){t=a.scrollTop(),i=a.height(),l=d()},m=function(){t>0?o.addClass("scrolled"):o.removeClass("scrolled"),$(".ontop").each(function(){var e=$(this),o=e.offset().top;t>=o?e.addClass("top"):e.removeClass("top")}),$(".onview").each(function(){var e=$(this),o=e.offset().top;if(t>o-i)if(e.hasClass("viewed")){if(e.hasClass("show-scrim")&&o-t>=0){e.addClass("showing-scrim");var a=1-(o-t)/i;if(r!==a){r=a;var n=e.data("scrim"),s=$("#"+n);s.length&&s.find(".scrim").css("opacity",a)}}}else e.addClass("viewed");else if(e.removeClass("viewed"),e.hasClass("showing-scrim")){e.removeClass("showing-scrim");var n=e.data("scrim"),s=$("#"+n);s.length&&s.find(".scrim").css("opacity",0)}})};if(a.load(function(){o.addClass("loaded")}),a.on("load",function(){f()}).on("throttledresize",function(){f()}),f(),window.requestAnimationFrame(c),$("time.timeago").timeago(),$('a[href]:not([href*="'+window.location.hostname+'"]):not([href^="#"]):not([href^="/"]):not([href^="javascript:"]):not([href^="mailto:"])').attr("target","_blank"),$("a.burger").on("click",function(e){e.preventDefault(),o.toggleClass("open-menu")}),$("#nav-header").on("click","a.close",function(e){e.preventDefault(),o.toggleClass("open-menu")}),o.hasClass("single-issue")||o.hasClass("page-template-page-sidebox")){var u=$("article.view-sidebox"),h=u.find(".entry-bottom"),v=h.find(".sidebox"),p=v.find(".sidebox-header"),g=h.find(".entry-content"),C=function(){if(p.removeClass("resized").removeAttr("style"),p.length){var e=0;p.find("span").each(function(){$(this).innerWidth()>e&&(e=$(this).innerWidth())}),e>0&&p.addClass("resized").css({width:e})}if(h.removeClass("resized").find(".extended").removeClass("extended"),g.removeAttr("style"),"desktop"===l){var o=v.innerHeight(),a=g.innerHeight(),n=0;a>o&&(g.css({"min-height":o}),h.addClass("resized"),g.find(".wp-caption").addClass("extended"),g.children().each(function(){n>o&&$(this).addClass("extended"),n+=$(this).outerHeight(!0)}))}};a.on("load",function(){C()}).on("throttledresize",function(){C()}),C(),u.find(".more-wrapper").each(function(){var e=$(this);$(this).on("click","a.more",function(o){e.addClass("expanded")})}),u.on("click","a.play-video",function(e){e.preventDefault();var o=$(this).attr("href"),a=$(o);if(a.length){var n=a.find(".video-wrapper"),t=n.find(".video-template");n.append(t.html()).on("click",function(e){e.stopPropagtion()}),a.addClass("show").on("click",function(e){e.preventDefault(),a.removeClass("show"),n.find("iframe").remove()}),$(document).on("keyup",function(e){27===e.keyCode&&(a.removeClass("show"),n.find("iframe").remove())})}})}var y=$("#modal");if(y.length){var k=function(){var e="modal-"+y.data("type");return void 0!==kg_modal_cookie&&(e=kg_modal_cookie),e},b=function(){void 0!==kg_modal_expires&&kg_modal_expires>0?Cookies.set(k(),Date.now(),{expires:kg_modal_expires}):Cookies.set(k(),Date.now())};if(void 0===Cookies.get(k())){if(o.addClass("open-modal"),bodyScrollLock.disableBodyScroll(y.find(".modal")[0]),y.on("click","a.modal-close",function(e){e.preventDefault(),o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),b()}),"donate"===y.data("type")){var w=y.find(".modal-form"),x=w.find(".amount-button"),D=w.find(".button");x.on("click",function(e){e.preventDefault(),x.removeClass("active"),$(this).addClass("active"),D.attr("href",$(this).attr("href"))}),D.on("click",function(e){o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),b()})}y.find("form.bsd-signup").on("submit",function(e){e.preventDefault();var a=$(this).find("input.button"),n=a.val();a.attr("disabled","disabled").addClass("disabled").val(a.data("submitting")),$.ajax({url:$(this).data("ajax"),type:$(this).attr("method"),dataType:"json",data:$(this).serialize(),success:function(e){a.val(a.data("success")),setTimeout(function(){o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),a.removeAttr("disabled").removeClass("disabled").val(n)},2e3)},error:function(e,o,t){alert("There was an error! Please check your submission and try again."),a.removeAttr("disabled").removeClass("disabled").val(n)}})})}}var S=$("#easter-egg");S.length&&($(".activate-easter-egg").on("click",function(e){e.preventDefault(),o.addClass("open-easter-egg"),bodyScrollLock.disableBodyScroll(S.find(".modal")[0])}),S.on("click","a.modal-close",function(e){e.preventDefault(),o.removeClass("open-easter-egg"),bodyScrollLock.clearAllBodyScrollLocks()}),S.find("form.bsd-signup").on("submit",function(e){o.removeClass("open-easter-egg")}));var A=$("#news");if(A.length){var _=A.find(".grid");_.masonry({itemSelector:".teaser",percentPosition:!0,transitionDuration:0});var j=!1;A.on("click",".pager a",function(e){if(e.preventDefault(),!j){j=!0;var o=$(this),a=o.parent(".pager"),n=o.prop("href");a.addClass("loading"),$.get(n,function(e){var o=$(e),n=o.find("#news").find(".grid"),t=o.find("#news").find(".pager");a.remove(),_.append(n).masonry("appended",n).after(t),j=!1})}})}}(jQuery);