!function($){var e=$("html"),o=$("body"),a=o.find("#main"),s=$(window),n=$("html, body"),t=o.find("#site-header"),l=t.find("#nav-header"),i=$("#modal"),d=!1,r=0,c=0,f=!1,p=1,u=function(){var e=s.width(),o=e>=1024?"desktop":e>=768?"tablet":"mobile";return o},m=u(),v=function(){r=s.scrollTop(),b(),window.requestAnimationFrame(v)},h=function(){var e=m;if(r=s.scrollTop(),c=s.height(),m=u(),o.hasClass("page-template-page-vision")&&e!==m){var n=a.find(".sections"),t=n.find(".section-tabs"),l=n.find(".section");t.find("a").removeClass("open"),l.removeClass("open").find(".section-inner").removeAttr("style"),"desktop"===m&&(t.find("a").first().addClass("open"),l.first().addClass("open"))}},b=function(){if(r>0?o.addClass("scrolled"):o.removeClass("scrolled"),o.hasClass("page-template-page-about")){var e=a.find("#chapters"),s=e.find("#tracks"),n=e.find("#train");r>=s.offset().top?r>=s.offset().top+s.innerHeight()-n.innerHeight()-124?n.addClass("stop").removeClass("fixed"):n.addClass("fixed").removeClass("stop"):n.removeClass("fixed stop")}if("desktop"===m){var l=a.find("#donate-bar");if(l.length>0){var f=t.innerHeight();o.hasClass("page-template-page-home")&&(f=l.offset().top),r>=f?o.addClass("donate-bar"):o.removeClass("donate-bar open-menu")}}i.length&&!d&&r>=c&&(d=!0,A())};if(s.load(function(){o.addClass("loaded")}),s.on("load",function(){h()}).on("throttledresize",function(){h()}),h(),window.requestAnimationFrame(v),$("a.burger").on("click",function(e){e.preventDefault(),e.stopPropagation(),o.hasClass("open-menu")?(bodyScrollLock.clearAllBodyScrollLocks(),o.removeClass("open-menu")):("desktop"!==m&&bodyScrollLock.disableBodyScroll(l[0]),o.addClass("open-menu"))}),l.on("click",function(e){e.stopPropagation()}),t.on("click",function(e){bodyScrollLock.clearAllBodyScrollLocks(),o.removeClass("open-menu")}),$("form.bsd-signup").on("submit",function(e){e.preventDefault();var o=$(this).find("input.button"),a=o.val();o.attr("disabled","disabled").addClass("disabled").val(o.data("submitting")),$.ajax({url:$(this).data("ajax"),type:$(this).attr("method"),dataType:"json",data:$(this).serialize(),success:function(e){o.val(o.data("success")),"undefined"!=typeof e.thanks_url&&""!==e.thanks_url&&(window.location.href=e.thanks_url)},error:function(e,s,n){window.alert("There was an error! Please check your submission and try again."),o.removeAttr("disabled").removeClass("disabled").val(a)}})}),o.hasClass("page-template-page-home")){var C=a.find(".carousel");C.slick({slidesToShow:3,slidesToScroll:3,prevArrow:'<button type="button" class="slick-prev" aria-label="Previous"><span class="icon-left"></span></button>',nextArrow:'<button type="button" class="slick-next" aria-label="Next"><span class="icon-right"></span></button>'})}if(o.hasClass("page-template-page-vision")){var k=a.find(".sections"),y=k.find(".section-tabs"),g=k.find(".section"),w=g.find(".issue");g.each(function(){var e=$(this);e.on("click",".section-header a",function(o){o.preventDefault();var a=e.find(".section-inner");e.hasClass("open")?(e.removeClass("open"),a.slideUp(300,function(){a.find(".issue.open").removeClass("open").find(".body").slideUp(0)})):(e.addClass("open"),a.slideDown(300))})}),w.each(function(){var e=$(this);e.on("click","h3 a",function(o){o.preventDefault();var a=e.find(".body");e.hasClass("open")?(e.removeClass("open"),a.slideUp(300)):(e.addClass("open"),a.slideDown(300))})}),y.on("click","a",function(e){e.preventDefault();var o=$(this),a=o.attr("href"),s=k.find(a);s.length&&(y.find("a").removeClass("open"),g.removeClass("open"),s.addClass("open"),o.addClass("open"))}),"desktop"===m&&(y.find("a").first().addClass("open"),g.first().addClass("open"))}if(i.length)var S=function(){var e="modal";return void 0!==modal_cookie&&(e=modal_cookie),e},x=function(){void 0!==modal_expires&&modal_expires>0?Cookies.set(S(),Date.now(),{expires:modal_expires}):Cookies.set(S(),Date.now())},A=function(){void 0===Cookies.get(S())&&(o.addClass("open-modal"),$(document).keyup(function(e){27===e.keyCode&&o.hasClass("open-modal")&&(o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),x())}),i.on("click",function(e){o.hasClass("open-modal")&&(o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),x())}),i.on("click",".modal",function(e){e.stopPropagation()}),i.on("click","a.modal-close",function(e){e.preventDefault(),o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),x()}),i.find("form.bsd-signup").off("submit").on("submit",function(e){e.preventDefault();var a=$(this).find("input.button"),s=a.val();a.attr("disabled","disabled").addClass("disabled").val(a.data("submitting")),$.ajax({url:$(this).data("ajax"),type:$(this).attr("method"),dataType:"json",data:$(this).serialize(),success:function(e){a.val(a.data("success")),x(),"undefined"!=typeof e.thanks_url&&""!==e.thanks_url?window.location.href=e.thanks_url:setTimeout(function(){o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),a.removeAttr("disabled").removeClass("disabled").val(s)},2e3)},error:function(e,o,n){window.alert("There was an error! Please check your submission and try again."),a.removeAttr("disabled").removeClass("disabled").val(s)}})}))}}(jQuery);