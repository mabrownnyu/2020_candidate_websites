!function($){var e=$("html"),o=$("body"),a=o.find("#main"),s=$(window),n=$("html, body"),t=o.find("#site-header"),i=t.find("#nav-header"),l=$("#modal"),d=$("#alert-bar"),r=!1,c=0,p=0,f=!1,u=1,m=function(){var e=s.width(),o=e>=1024?"desktop":e>=768?"tablet":"mobile";return o},v=m(),h=function(){c=s.scrollTop(),C(),window.requestAnimationFrame(h)},b=function(){var e=v;if(c=s.scrollTop(),p=s.height(),v=m(),o.hasClass("page-template-page-vision")&&e!==v){var n=a.find(".sections"),t=n.find(".section-tabs"),i=n.find(".section");t.find("a").removeClass("open"),i.removeClass("open").find(".section-inner").removeAttr("style"),"desktop"===v&&(t.find("a").first().addClass("open"),i.first().addClass("open"))}},C=function(){if(c>0?o.addClass("scrolled"):o.removeClass("scrolled"),o.hasClass("page-template-page-about")){var e=a.find("#chapters"),s=e.find("#tracks"),n=e.find("#train");c>=s.offset().top?c>=s.offset().top+s.innerHeight()-n.innerHeight()-124?n.addClass("stop").removeClass("fixed"):n.addClass("fixed").removeClass("stop"):n.removeClass("fixed stop")}if("desktop"===v){var i=a.find("#donate-bar");if(i.length>0){var d=t.innerHeight();o.hasClass("page-template-page-home")&&(d=i.offset().top),c>=d?o.addClass("donate-bar"):o.removeClass("donate-bar open-menu")}}l.length&&!r&&c>=p&&(r=!0,_())};if(s.load(function(){o.addClass("loaded")}),s.on("load",function(){b()}).on("throttledresize",function(){b()}),b(),window.requestAnimationFrame(h),$("a.burger").on("click",function(e){e.preventDefault(),e.stopPropagation(),o.hasClass("open-menu")?(bodyScrollLock.clearAllBodyScrollLocks(),o.removeClass("open-menu")):("desktop"!==v&&bodyScrollLock.disableBodyScroll(i[0]),o.addClass("open-menu"))}),i.on("click",function(e){e.stopPropagation()}),t.on("click",function(e){bodyScrollLock.clearAllBodyScrollLocks(),o.removeClass("open-menu")}),$("form.bsd-signup").on("submit",function(e){e.preventDefault();var o=$(this).find("input.button"),a=o.val();o.attr("disabled","disabled").addClass("disabled").val(o.data("submitting")),$.ajax({url:$(this).data("ajax"),type:$(this).attr("method"),dataType:"json",data:$(this).serialize(),success:function(e){o.val(o.data("success")),"undefined"!=typeof e.thanks_url&&""!==e.thanks_url&&(window.location.href=e.thanks_url)},error:function(e,s,n){window.alert("There was an error! Please check your submission and try again."),o.removeAttr("disabled").removeClass("disabled").val(a)}})}),o.hasClass("page-template-page-home")){var k=a.find(".carousel");k.slick({slidesToShow:3,slidesToScroll:3,prevArrow:'<button type="button" class="slick-prev" aria-label="Previous"><span class="icon-left"></span></button>',nextArrow:'<button type="button" class="slick-next" aria-label="Next"><span class="icon-right"></span></button>'})}if(o.hasClass("page-template-page-vision")){var y=a.find(".sections"),g=y.find(".section-tabs"),w=y.find(".section"),S=w.find(".issue");w.each(function(){var e=$(this);e.on("click",".section-header a",function(o){o.preventDefault();var a=e.find(".section-inner");e.hasClass("open")?(e.removeClass("open"),a.slideUp(300,function(){a.find(".issue.open").removeClass("open").find(".body").slideUp(0)})):(e.addClass("open"),a.slideDown(300))})}),S.each(function(){var e=$(this);e.on("click","h3 a",function(o){o.preventDefault();var a=e.find(".body");e.hasClass("open")?(e.removeClass("open"),a.slideUp(300)):(e.addClass("open"),a.slideDown(300))})}),g.on("click","a",function(e){e.preventDefault();var o=$(this),a=o.attr("href"),s=y.find(a);s.length&&(g.find("a").removeClass("open"),w.removeClass("open"),s.addClass("open"),o.addClass("open"))}),"desktop"===v&&(g.find("a").first().addClass("open"),w.first().addClass("open"))}if(d.length){var x=a.find(".type-page.view-notfound, .type-page.view-about .entry-header, .type-page.view-vision .entry-header, .type-page.view-home .entry-header"),A=function(){var e=d.outerHeight(!0);x.css("height",p-e)};A(),s.on("throttledresize",function(){A()})}if(l.length)var L=function(){var e="modal";return void 0!==modal_cookie&&(e=modal_cookie),e},D=function(){void 0!==modal_expires&&modal_expires>0?Cookies.set(L(),Date.now(),{expires:modal_expires}):Cookies.set(L(),Date.now())},_=function(){void 0===Cookies.get(L())&&(o.addClass("open-modal"),$(document).keyup(function(e){27===e.keyCode&&o.hasClass("open-modal")&&(o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),D())}),l.on("click",function(e){o.hasClass("open-modal")&&(o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),D())}),l.on("click",".modal",function(e){e.stopPropagation()}),l.on("click","a.modal-close",function(e){e.preventDefault(),o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),D()}),l.find("form.bsd-signup").off("submit").on("submit",function(e){e.preventDefault();var a=$(this).find("input.button"),s=a.val();a.attr("disabled","disabled").addClass("disabled").val(a.data("submitting")),$.ajax({url:$(this).data("ajax"),type:$(this).attr("method"),dataType:"json",data:$(this).serialize(),success:function(e){a.val(a.data("success")),D(),"undefined"!=typeof e.thanks_url&&""!==e.thanks_url?window.location.href=e.thanks_url:setTimeout(function(){o.removeClass("open-modal"),bodyScrollLock.clearAllBodyScrollLocks(),a.removeAttr("disabled").removeClass("disabled").val(s)},2e3)},error:function(e,o,n){window.alert("There was an error! Please check your submission and try again."),a.removeAttr("disabled").removeClass("disabled").val(s)}})}))}}(jQuery);