document.addEventListener("touchstart",function(){},!1),window.site={players:{},transitionSpeed:250,waypointElements1:document.getElementsByClassName("trigger"),waypointElements2:document.getElementsByClassName("low-trigger"),waypointElements3:document.getElementsByClassName("high-trigger"),waypoints:[],addPlayers:function(){$iframes=$("iframe[data-type='vimeo']"),$.each($iframes,function(e,t){id=$(t).parent().attr("data-video"),site.players[id]=new Vimeo.Player(t),$("body").on("click",".play[data-video]",function(){site.players[$(this).attr("data-video")].play().then(function(){}).catch(function(e){})}),$("body").on("click",".pause[data-video]",function(){site.players[$(this).attr("data-video")].pause().then(function(){}).catch(function(e){})})})},addWayPoints:function(){for(var e=0;e<site.waypointElements1.length;e++)site.waypoints.push(new Waypoint({element:site.waypointElements1[e],handler:function(e){$(this.element).addClass("reveal")},offset:"85%"}));for(e=0;e<site.waypointElements2.length;e++)site.waypoints.push(new Waypoint({element:site.waypointElements2[e],handler:function(e){$(this.element).addClass("reveal")},offset:"100%"}));for(e=0;e<site.waypointElements3.length;e++)site.waypoints.push(new Waypoint({element:site.waypointElements3[e],handler:function(e){$(this.element).addClass("reveal")},offset:"65%"}))},surveyValidation:function(){$("#survey-form").length>0&&$("#survey-form").validate({errorElement:"strong",errorPlacement:function(e,t){e.appendTo($("#survey-form .error-msg"))}})},form:{addSourceCodes:function(){var e=Trilogy.params().sc||Trilogy.params().source||Trilogy.params().refcode;void 0!==e&&($.each($("form"),function(t,i){var n,a=$(i).attr("action");n=-1!==a.indexOf("actblue")?"refcode":"source",-1===a.indexOf("?")?$(i).attr("action",a+"?"+n+"="+e):$(i).attr("action",a+"&"+n+"="+e)}),$.each($("input[name='SuccessUrl'], input[name='success_url']"),function(t,i){var n,a=$(i).val();n=-1!==a.indexOf("actblue")?"refcode":"source",-1===a.indexOf("?")?$(i).val(a+"?"+n+"="+e):$(i).val(a+"&"+n+"="+e)}))},afterSubmit:function(){var e;if($form=$("form[data-validate='multistep']"),1===$form.find("input[name='successUrl']").length?e=$form.find("input[name='successUrl']").val():1===$form.find("input[name='success_url']").length&&(e=$form.find("input[name='success_url']").val()),"string"==typeof e){var t=e+"&email="+$("#email").val()+"&zip="+$("#zip").val();window.location=t}else $("form[data-validate='multistep']").fadeOut(site.transitionSpeed,function(){$("#form-response").fadeIn(site.transitionSpeed)})},formatPhone:function(e){var t="1"===(e=e.replace(/\D/g,""))[0],i=t?11:10;switch(e=e.substring(0,i),!0===t&&(t=!0,e=e.substring(1,i)),e.length){case 0:e=e;break;case 1:case 2:e="("+e;break;case 3:e="("+e.substring(0,3)+")";break;case 4:case 5:e="("+e.substring(0,3)+") "+e.substring(3,6);break;case 6:e="("+e.substring(0,3)+") "+e.substring(3,6)+"-";break;default:e="("+e.substring(0,3)+") "+e.substring(3,6)+"-"+e.substring(6,i)}return!0===t?"1 "+e:e},submit:function(e,t,i){$.ajax({method:"POST",url:$(e).attr("action"),data:$(e).serialize(),success:function(e){i.call()},error:function(){e.submit(),window.setTimeout(i,t)}})},trackEvent:function(e,t,i){"undefined"!=typeof ga&&ga("send","event",e,t,i),"undefined"!=typeof fbq&&fbq("track","Lead",{content_category:e,content_name:i}),"undefined"!=typeof twttr&&(twttr.conversion.trackPid("o1iai",{tw_sale_amount:0,tw_order_quantity:0}),new Image(1,1).src="https://ad.ipredictive.com/d/track/cvt/pixel?acct_id=19647&cache_buster="+Math.floor(Date.now()/1e3))}}},site.form.addSourceCodes(),site.addWayPoints(),$(document).ready(function(){site.addPlayers(),site.surveyValidation(),$(window).scrollTop()>1&&$("header").addClass("fixed"),$(window).scroll(function(){$(window).scrollTop()>1&&$("header").addClass("fixed"),$(window).scrollTop()<1&&$("header").removeClass("fixed")}),$("body").on("click","#reveal-container",function(){$("#container-to-reveal").is(":hidden")?$("#container-to-hide").fadeOut(site.transitionSpeed,function(){$("#container-to-reveal").fadeIn(site.transitionSpeed),$("#reveal-container").text($("#reveal-container").attr("data-alt-text"))}):$("#container-to-reveal").fadeOut(site.transitionSpeed,function(){$("#container-to-hide").fadeIn(site.transitionSpeed),$("#reveal-container").text($("#reveal-container").attr("data-text"))}),$(this).hasClass("pause")?$(this).removeClass("pause").addClass("play"):$(this).hasClass("play")&&$(this).removeClass("play").addClass("pause")}),$(".menu").click(function(){$("body").hasClass("expanded-menu")?$("body").removeClass("expanded-menu").removeClass("reveal-items"):($("body").addClass("expanded-menu"),window.setTimeout(function(){$("body").addClass("reveal-items")},300))}),$(".close").click(function(){$("body").removeClass("expanded-menu").removeClass("reveal-items")}),$("body").on("click","#quiz .form-reveal",function(){$("#quiz .main").fadeToggle(site.transitionSpeed,function(){$("#i-agree-form").fadeToggle(site.transitionSpeed)})}),$("#i-agree-button").click(function(){$(".values").addClass("reveal-form")}),$.each(window.videoPromoSlugs,function(e,t){$("#video-"+t).popup({opacity:"1",color:"#007bb6",onclose:function(){$video=$(this).find("[data-video]"),$video.length>0&&site.players[$video.attr("data-video")].pause().then(function(){}).catch(function(e){})},onopen:function(){$video=$(this).find("[data-video]"),$video.length>0&&site.players[$video.attr("data-video")].play().then(function(){}).catch(function(e){})}})}),$("body").on("keyup",".field input[type='text'], .field input[type='email'], .field input[type='tel']",function(){$(this).val().length>0?$(this).closest(".field").addClass("text-entered"):$(this).closest(".field").removeClass("text-entered")}),$("body").on("keyup","[data-role='phone']",function(){$(this).val(site.form.formatPhone($(this).val()))}),$("body").on("click","[data-role='skip']",function(){$form=$(this).closest("form"),$step2=$form.find("[data-step='2']"),$step3=$form.parent().find("[data-step='3']"),$step2.fadeOut(site.transitionSpeed,function(){$step3.fadeIn(site.transitionSpeed),$form.find("input[name='step']").val("3"),$step2.find("input").removeClass("required error").removeAttr("data-msg-required aria-invalid aria-describedby")})}),$("#hero-signup-form").length>0&&($("#hero-signup-form-step").val("1"),$("#hero-signup-form").validate({errorElement:"strong",errorPlacement:function(e,t){$container=$("#step"+$("#hero-signup-form-step").val()),e.appendTo($container.find(".error-msg"))},submitHandler:function(e){site.form.submit(e,2e3,function(){site.form.trackEvent("form","submit",$(e).attr("action")+"-step-"+$("#hero-signup-form-step").val()),"1"===$("#hero-signup-form-step").val()?$("#step1").fadeOut(site.transitionSpeed,function(){$("#step2").fadeIn(site.transitionSpeed),$("#hero-signup-form-step").val("2")}):"2"===$("#hero-signup-form-step").val()&&$("#step2").fadeOut(site.transitionSpeed,function(){$("#step3").fadeIn(site.transitionSpeed),$("#hero-signup-form-step").val("3")})})}})),$("#i-agree-signup-form").length>0&&($("#i-agree-form-step").val("1"),$("#i-agree-signup-form").validate({errorElement:"strong",errorPlacement:function(e,t){$container=$("#quiz-step"+$("#i-agree-form-step").val()),e.appendTo($container.find(".error-msg"))},submitHandler:function(e){site.form.submit(e,2e3,function(){site.form.trackEvent("form","submit",$(e).attr("action")+"-step-"+$("#i-agree-form-step").val()),"1"===$("#i-agree-form-step").val()?$("#quiz-step1").fadeOut(site.transitionSpeed,function(){$("#quiz-step2").fadeIn(site.transitionSpeed),$("#i-agree-form-step").val("2")}):"2"===$("#i-agree-form-step").val()&&$("#quiz-step2").fadeOut(site.transitionSpeed,function(){$("#quiz-step3").fadeIn(site.transitionSpeed),$("#i-agree-form-step").val("3")})})}})),$("form[data-validate='multistep']").length>0&&($("form[data-validate='multistep'] #form-step").val("1"),$("form[data-validate='multistep']").validate({errorElement:"strong",errorPlacement:function(e,t){$container=$("#step"+$("#form-step").val()),e.appendTo($container.find(".error-msg"))},submitHandler:function(e){var t;t=!0===site.form.hideSMS&&!0===site.form.hideSurvey?2e3:50,site.form.submit(e,t,function(){site.form.trackEvent("form","submit",$(e).attr("action")+"-step-"+$(e).find("[name='step']").val()),!0===site.form.hideSMS&&!0===site.form.hideSurvey?site.form.afterSubmit():!0===site.form.hideSMS&&!1===site.form.hideSurvey?"1"===$("#form-step").val()&&$("#step1").fadeOut(site.transitionSpeed,function(){$("#step3").fadeIn(site.transitionSpeed),$("#form-step").val("3")}):!1===site.form.hideSMS&&!0===site.form.hideSurvey?"1"===$("#form-step").val()?$("#step1").fadeOut(site.transitionSpeed,function(){$("#step2").fadeIn(site.transitionSpeed),$("#form-step").val("2")}):"2"===$("#form-step").val()&&site.form.afterSubmit():!1===site.form.hideSMS&&!1===site.form.hideSurvey&&("1"===$("#form-step").val()?$("#step1").fadeOut(site.transitionSpeed,function(){$("#step2").fadeIn(site.transitionSpeed),$("#form-step").val("2")}):"2"===$("#form-step").val()&&$("#step2").fadeOut(site.transitionSpeed,function(){$("#step3").fadeIn(site.transitionSpeed),$("#form-step").val("3")}))})}}),$("body").on("click","#step3 input",function(){$form=$(this).closest("form"),site.form.submit($form[0],2e3,function(){site.form.trackEvent("form","submit",$form.attr("action")+"-step-"+$form.find("[name='step']").val()),site.form.afterSubmit()})})),$("form[data-validate='one-step']").length>0&&$("form[data-validate='one-step']").validate({errorElement:"strong",errorPlacement:function(e,t){e.appendTo($("form[data-validate='one-step'] .error-msg"))},submitHandler:function(e){site.form.submit(e,2e3,function(){site.form.trackEvent("form","submit",$(e).attr("action")+"-onestep-1")}),$("form[data-validate='one-step']").fadeOut(site.transitionSpeed,function(){$("#form-response").fadeIn(site.transitionSpeed)})}})});
